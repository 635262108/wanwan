{include file="public/header"/}
<style>
	  #s2id_autogen1{
	  	width: 100%;
	  	height: 20px;
	  }
	  #s2id_autogen1 .select2-choice div b{
	  	background-position:0px -3px;
	  }
	  #s2id_autogen1 .select2-choice{
	    	height: 20px;
	    	line-height: 20px;
	  }
	  #s2id_autogen1 a span{
	    	height: 20px;
	  }
	  .dataTables_paginate{
	  	display: none;
	  }
	  .container-fluid .pagination{
				display: flex;
				justify-content: flex-end;

		}
		table tr th{
			cursor: pointer;
		}
	  
</style>


 
<div id="content" style="background: #F6F6F6;">
		
	<!--breadcrumbs-->
	<div id="content-header">
		<div id="breadcrumb">
			<a href="index.html" title="Go to Home" class="tip-bottom"><i class="icon-home"></i>首页</a>
			<a href="{:url('admin/user/index')}" class="tip-bottom">客户中心</a>
			<a href="#" class="current">客户列表</a>
		</div>
	</div>
	<div class="member_check">
		<ul>
			<li><img src="__AIMG__/add_member.png" style="margin-right: 6px;">
					<a href="{:url('admin/user/add_member')}">添加</a>
			</li>
			<li><img src="__AIMG__/pai.png" style="margin-right: 6px;">筛选<span></span></li>
		</ul>
	</div>
	<div class="pai_contents">
		<div class="shai">
			<div class="only_one">
				<p>新增</p>
				<ul>
					<li data-val=1 data-name="add">本月</li>
					<li data-val=2 data-name="add">本周</li>
				</ul>
			</div>
			<div class="only_one">
				<p>住址</p>
				<ul>
					{foreach name="zhengZhou" item="vo"}
					<li data-val={$vo.id} data-name="address">{$vo.name}</li>
					{/foreach}
				</ul>
			</div>
		<div style="margin-bottom: 8px;" class="only_one">
				<p style="width: 90px;">客户类型</p>
				<ul>
				   <li data-val=1 data-name="is_member">会员</li>
				   <li data-val=0 data-name="is_member">非会员</li>
				</ul>
		</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
							 <div class="memberSearch">
								 <select>
									   	   <option selected="selected" value="1">手机号</option>
									   	   <option value="2">大人姓名</option>
									   	   <option value="3">小孩姓名</option>
								 </select>
									   <input type="text" />
									   <button >搜索</button>
	            		</div>
				<div class="widget-box">
					<div class="widget-title"> <span class="icon"><i class="icon-th"></i></span>
						<h5>会员列表</h5>
					</div>
					<div class="widget-content nopadding" id="con">
					
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!--查看模态框-->
<div class="modal_box hide">
	<div class="modal_div" style="background: #F0F0F0;">
		<div class="cancel">X</div>
		<div class="total_title">会员信息</div>
		<div class="member_title">
			<ul>
				<li class="active">会员概要</li>
				<li>详细信息</li>
				<li>孩子信息</li>
			</ul>
		</div>

		<div class="memberContents">
			<div class="memeber_information" style="margin-top: 40px;">
				<ul>
					<li><span>会员姓名</span><span class="member_name"></span></li>
					<li><span>会员手机</span><span class="member_phone"></span></li>
					<li><span>会员余额</span><span class="balance"></span></li>
					<li><span>消费金额</span><span class="consumtion"></span></li>
					<li><span>报名次数</span><span class="enrol_num"></span></li>
					<li><span>参加次数</span><span class="join_num"></span></li>
					<li><span>信用积分</span><span class="credit"></span></li>
					<li><span>会员来源</span><span class="source"></span></li>
					<li><span style="width:31%;">当前充值次数</span><span class="pay_num">9999</span></li>

				</ul>

			</div>
			<div class="detailContent_information" style="display: none;margin-top: 40px;">
				<ul>
					<li><span>会员姓名</span><span class="nickname"></span></li>
					<li><span>会员手机</span><span class="phone"></span></li>
					<li><span>会员性别</span><span class="sex"></span></li>
					<li><span>加入时间</span><span class="reg_time"></span></li>
					<li><span style="text-align: right;">省</span><span class="province"></span></li>
					<li><span style="text-align: right;">市</span><span class="city"></span></li>
					<li><span style="text-align: right;">区</span><span class="district"></span></li>
					<li><span>详细地址</span><span class="address"></span></li>
					<li><span>会员生日</span><span class="birthday"></span></li>
					<li><span>会员邮箱</span><span class="email"></span></li>
					<li><span>会员爱好</span><span class="hobby"></span></li>
				</ul>
			</div>
			<div class="child_information" style="display: none;">
			</div>
		</div>
  </div>
</div>

<div class="modal_addsecondBox" style="display:none;">
	<div class="second_modal">
		<div class="second_cancel">X</div>
		<div class="uid" style="display:none;"></div>
		<div class="add_information">
			<div><span>孩子姓名</span><input type="text" class="child_name" value=""></div>
			<div><span>孩子性别</span>
				<input type="radio" name="sex" value="1">男
				<input type="radio" name="sex" value="2" />女
			</div>
			<div><span>孩子学校</span><input type="text" class="child_school" value=""></div>
			<div><span>玩耍时间</span><input type="text" class="child_time" value=""></div>
			<div><span>孩子生日</span><input type="text" onClick="new Calendar().show(this);" value="" style="cursor: pointer;" class="child_birthday"></div>
		</div>
		<div class="add_success">保存</div>
	</div>
</div>

<div class="modal_emitsecondBox" style="display: none;">
	<div class="second_modal">
		<div class="emit_second_cancel">X</div>
		<div class="id" style="display: none;"></div>
		<div class="add_information">
			<div><span>孩子姓名</span><input type="text" class="new_name" value=""></div>
			<div><span>孩子性别</span>
				<input type="radio" name="sex" value="1" class="man">男
				<input type="radio" name="sex" value="2" class="woman" />女
			</div>
			<div><span>孩子学校</span><input type="text" class="new_school" value=""></div>
			<div><span>玩耍时间</span><input type="text" class="new_time" value=""></div>
			<div><span>孩子生日</span><input type="text" onClick="new Calendar().show(this);" value="" style="cursor: pointer;" class="new_birthday"></div>
		</div>
		<div class="emit_success">保存</div>
	</div>
</div>

<script src="__AJS__/jquery.min.js"></script> 
<script src="__AJS__/jquery.ui.custom.js"></script> 
<script src="__AJS__/bootstrap.min.js"></script> 
<script src="__AJS__/jquery.uniform.js"></script> 
<script src="__AJS__/matrix.js"></script> 
</html>

<script>
    $(document).ready(function() {
        var data = {
        "page" : 1,
				"add" : '',
				"address" : '',
				'is_member' : '',
				'mobile':'',
				'nickname':'',
				'childName':'',
				'orderby1':'uid',
				'orderby2':'desc'
			}
        $.get("/abab.php/user/ajax_user_index", data,
            function(data){
         
               $("#con").html(data);
        });

    });
//

var Uidsort=true;
var nickNameSort=true;
var mobileSort=true;
var gradeSort=true;
var timeSort=true;
var balanceSort=true;
var sourceSort=true;
$(".shai li,.memberSearch button,.pagination a,.userId,.nickName,.mobile,.member_grade,.reg_time,.balance,.source").live("click",function(){
			var cur_page = $(this).data('p');
			var data = {
        "page" : cur_page,
				"add" : '',
				"address" : '',
				'is_member' : '',
				'mobile':'',
				'nickname':'',
				'childName':'',
				'orderby1':'uid',
				'orderby2':'desc'
			}
			var c;//标记
			var name; //名称
			var value; //数据
			var add;//新增
			var address;//地址
		 	var is_member;//是否为会员
		 	var search= $(".memberSearch select").val();
    	var search_text = $(".memberSearch input").val();

    	if($(this).attr("class")=="userId"){
    		    data.orderby1="uid";
    		    if(Uidsort){
    		    	  data.orderby2="asc";
    		    	  Uidsort=false;
    		    }
    		    else{
    		    	 data.orderby2="desc";
    		    	 Uidsort=true;
    		    }
    		    
    		    
    	}

    	if($(this).attr("class")=="nickName"){
    		   data.orderby1="nickname";
    		  if(nickNameSort){
    		  	  data.orderby2="asc";
    		  	  nickNameSort=false;
    		  }
    		  else{
    		  	  data.orderby2="desc";
    		  	  nickNameSort=true;
    		  }
    	}
    	

    	if($(this).attr("class")=="mobile"){
    		   data.orderby1="mobile";
    		   if(mobileSort){
    		   	data.orderby2="asc";
    		   	mobileSort=false;
    		   }
    		   else{
    		   	  data.orderby2="desc";
    		   	  mobileSort=true;
    		   }
    	}

    if($(this).attr("class")=="member_grade"){
    	   data.orderby1="member_grade";
    	   if(gradeSort){
    	   	  data.orderby2="asc";
    	   	  gradeSort=false;
    	   }
    	   else{
    	   	  data.orderby2="desc";
    		   	gradeSort=true;
    	   }
    }
    
    if($(this).attr("class")=="reg_time"){
    	  data.orderby1="reg_time";
    	  if(timeSort){
    	  	data.orderby2="asc";
    	  	timeSort=false;
    	  }
    	  else{
    	  	data.orderby2="desc";
    	  	timeSort=true;
    	  }
    }
    
    if($(this).attr("class")=="balance"){
    	  data.orderby1="balance";
    	  if(balanceSort){
    	  	data.orderby2="asc";
    	  	balanceSort=false;
    	  }
    	  else{
    	  	data.orderby2="desc";
    	  	balanceSort=true;
    	  }
    }
    
    if($(this).attr("class")=="source"){
    	  data.orderby1="source";
    	  if(sourceSort){
    	  	data.orderby2="asc";
    	  	sourceSort=false;
    	  }
    	  else{
    	  	data.orderby2="desc";
    	  	sourceSort=true;
    	  }
    }
		 
		 if($(this).attr("data-c") == 1){
				$(this).removeAttr("style")
				$(this).removeAttr("data-c")
		 }else{
			 	$(this).css({color:"red"})
				$(this).attr("data-c","1")
				$(this).siblings().removeAttr("style");
				$(this).siblings().removeAttr("data-c");
		 }
//		 
		 $(".shai li").each(function(){
		
		    c = $(this).attr('data-c');
		   
		    if(c == "1"){
		    	name = $(this).attr('data-name')
		    	if(name == 'add'){
		    		data.add = $(this).attr('data-val')
		    	}
		    	else if(name == 'address'){
		    		data.address = $(this).attr('data-val')
		    	}
		    	else if(name == 'is_member'){
		    		data.is_member = $(this).attr('data-val')
		    	}
		    }

		 })
		 
		 //定义搜索条件，1手机号，2大人姓名，3小孩姓名
    	if(search == 1){
    		data.mobile = search_text
    	}                               
    	else if (search == 2){
    		data.nickname = search_text
    	}
    	else if (search == 3){
    		data.childName = search_text
    	}
		 
		 $.get("/abab.php/user/ajax_user_index", data,
        function(data){
          $("#con").html(data);
     });
})


//实现
//$(".clickTr").live("click",function(){
//	     console.log(6666);
//	   if($(this).children().attr("class")=="userId"){
//	   	   console.log(1);
//	   }
//	   if($(this).children().attr("class")=="nickName"){
//	   	   console.log(2);
//	   }
//})


</script>